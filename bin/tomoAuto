#!/usr/bin/env lua
local tomoAutoDir = os.getenv('TOMOAUTOROOT')
package.path   = package.path .. ';' .. tomoAutoDir .. '/lib/?.lua;'
local tomoAuto = require 'tomoAuto'
local yago     = require 'yago'
local sString  = 'c,   d_,      g,   h,    i_,   l_,     m_, '
local lString  = 'ctf, defocus, gpu, help, iter, config, mode, '
local sString  = sString .. 'p_,      s,    t,      z_'
local lString  = lString .. 'procnum, SIRT, tomo3D, thickness'
local status, arg, Opts = pcall(yago.getOpt, arg, sString, lString)
if not status then
   local err = arg
   io.stderr:write(err)
   return 1
end

tomoAuto.reconstruct(arg[1], arg[2], Opts)
